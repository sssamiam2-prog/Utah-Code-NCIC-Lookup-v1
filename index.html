<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Violation / NCIC Code Search</title>

  <!-- Choices.js styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />

  <style>
    body { margin:0; font-family: system-ui, sans-serif; background:#f9fafb; }
    header { background:#1e3a8a; color:#fff; padding:12px; text-align:center; font-weight:600; }
    .wrap { max-width:1400px; margin:0 auto; padding:16px; }
    .filters { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap:12px; margin-bottom:12px; }
    .label { font-size:12px; color:#374151; margin-bottom:4px; display:block; font-weight:600; }
    .search-input { border:2px solid #2563eb; border-radius:8px; padding:8px 10px; width:100%; }
    .table-wrap { background:#fff; border-radius:8px; border:1px solid #e5e7eb; overflow:auto; max-height:70vh; }
    table { width:100%; border-collapse:collapse; font-size:14px; }
    th, td { padding:8px 10px; border-bottom:1px solid #e5e7eb; text-align:left; vertical-align:top; }
    th { background:#f3f4f6; position:sticky; top:0; z-index:1; }
    .tools { display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin:12px 0; }
    .badge { background:#eef2ff; color:#3730a3; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:600; }
    .pagination { display:flex; gap:8px; align-items:center; }
    .btn { padding:6px 10px; border:1px solid #d1d5db; background:#fff; border-radius:6px; cursor:pointer; }
    .btn[disabled]{ opacity:.5; cursor:not-allowed; }
    .choices { position:relative; z-index:5; }
    .choices__list--dropdown { z-index:9999; }
    /* clickable violation codes */
    .link { color:#2563eb; text-decoration:none; }
    .link:hover { text-decoration:underline; }
    /* modal */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:10000; }
    .modal-content { background:#fff; padding:20px; border-radius:8px; max-width:90%; max-height:90%; overflow:auto; }
    .modal iframe { width:80vw; height:70vh; border:none; }
    .close { float:right; font-size:18px; cursor:pointer; color:#dc2626; }
    /* loader */
    #loading { position:fixed; top:0; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; background:#f9fafb; z-index:9999; }
    .spinner { border:6px solid #e5e7eb; border-top:6px solid #2563eb; border-radius:50%; width:48px; height:48px; animation: spin 1s linear infinite; }
    @keyframes spin { 100% { transform:rotate(360deg);} }
  </style>
</head>
<body>
  <header>Violation / NCIC Code Search</header>
  <div class="wrap">
    <div class="filters">
      <div>
        <label class="label">Jurisdiction</label>
        <select id="jurisdiction"></select>
      </div>
      <div>
        <label class="label">Search Short Description or NCIC Code</label>
        <input id="search" class="search-input" type="text" placeholder="Search..."/>
      </div>
    </div>

    <div class="tools">
      <span id="count" class="badge">0 rows</span>
      <div class="pagination">
        <button id="prev" class="btn">Prev</button>
        <span id="page">Page 1/1</span>
        <button id="next" class="btn">Next</button>
        <select id="size" class="btn">
          <option>50</option>
          <option selected>100</option>
          <option>200</option>
        </select>
      </div>
    </div>

    <div class="table-wrap">
      <table>
        <thead><tr id="head"></tr></thead>
        <tbody id="body"></tbody>
      </table>
    </div>
  </div>

  <!-- modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span id="close" class="close">âœ– Close</span>
      <iframe id="preview"></iframe>
    </div>
  </div>

  <div id="loading"><div class="spinner"></div></div>

  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
